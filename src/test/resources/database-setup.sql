DROP TABLE QUESTION_ANSWER_MAPPING IF EXISTS;
DROP TABLE QUIZ_QUESTION_MAPPING IF EXISTS;
DROP TABLE QUIZ IF EXISTS;
DROP TABLE QUESTION IF EXISTS;
DROP TABLE ANSWER IF EXISTS;
DROP TABLE QUIZ_TYPE IF EXISTS;

CREATE TABLE QUIZ_TYPE(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 10, INCREMENT BY 1) PRIMARY KEY,
    description nvarchar(255) NOT NULL UNIQUE
);
CREATE TABLE QUIZ(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1000, INCREMENT BY 1) PRIMARY KEY,
    description nvarchar(255) NOT NULL UNIQUE,
    quizTypeId INTEGER,
    FOREIGN KEY (quizTypeId) REFERENCES QUIZ_TYPE(id)
);
CREATE TABLE ANSWER(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 10000, INCREMENT BY 1) PRIMARY KEY,
    description nvarchar(255) NOT NULL UNIQUE
);

CREATE TABLE QUESTION(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 10000, INCREMENT BY 1) PRIMARY KEY,
    description nvarchar(255) NOT NULL UNIQUE
);

CREATE TABLE QUESTION_ANSWER_MAPPING(
    question_id INTEGER NOT NULL,
    answer_id INTEGER NOT NULL,
    PRIMARY KEY (question_id,answer_id),
    FOREIGN KEY (question_id) REFERENCES QUESTION(id),
    FOREIGN KEY (answer_id) REFERENCES ANSWER(id)
);

CREATE TABLE QUIZ_QUESTION_MAPPING(
    quiz_id INTEGER NOT NULL,
    question_id INTEGER NOT NULL,
    PRIMARY KEY (quiz_id,question_id),
    FOREIGN KEY (quiz_id) REFERENCES QUIZ(id),
    FOREIGN KEY (question_id) REFERENCES QUESTION(id)
);
INSERT INTO QUIZ_TYPE(description) VALUES ('Geography Quiz');
INSERT INTO QUIZ_TYPE(description) VALUES ('Science Quiz');

INSERT INTO QUIZ(description,quizTypeId) VALUES('Test Geography Quiz for Class X',10);
INSERT INTO QUIZ(description,quizTypeId) VALUES('Test Science Quiz for Class IX',11);
INSERT INTO QUIZ(description,quizTypeId) VALUES('Test Science Quiz for Class X', 11);

INSERT INTO QUESTION(description) VALUES('When the National Forest Policy was formed in India');
INSERT INTO ANSWER(description) VALUES('1952');
INSERT INTO QUESTION_ANSWER_MAPPING VALUES(10000,10000);

INSERT INTO QUESTION(description) VALUES('Oxidation is a process which involves');
INSERT INTO ANSWER(description) VALUES('addition of oxygen');
INSERT INTO QUESTION_ANSWER_MAPPING VALUES(10001,10001);

INSERT INTO QUIZ_QUESTION_MAPPING VALUES(1000,10000);
INSERT INTO QUIZ_QUESTION_MAPPING VALUES(1001,10001);
INSERT INTO QUIZ_QUESTION_MAPPING VALUES(1002,10001);

COMMIT;